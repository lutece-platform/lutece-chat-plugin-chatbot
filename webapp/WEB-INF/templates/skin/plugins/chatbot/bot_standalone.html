<!DOCTYPE html>
<html> 
    <head>
        <base href="${base_url}">
        <!-- Le style -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-theme.min.css" rel="stylesheet">
        <link href="css/bootswatch.min.css" rel="stylesheet">
        <link href="css/page_template_styles.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css"  media="screen">
        <link href="css/plugins/chatbot/chatbot.css?lutece_h=adcdc7cb2fdf17972b9d4d790013cceaa8ff0522e8a0b9f1bb8f2a71d3e7ec8d" rel="stylesheet"  type="text/css"  media="screen">
        <!-- Included JS Files -->
        <script src="js/jquery/jquery.min.js"></script>
    </head>
    <body>
        <div id="standAloneChatContainer">
            <div class="chatContainer" >
                <!--Liste des Posts-->
                <div class="direct-chat-messages">
                    <#list posts_list as post >
                    <div class="chatBox">
                        <#if post.author!=1><img src="${bot_avatar}" class="botAvatar" alt="avatar" title=""></#if>
                        <div class="bubble <#if post.author==1>bubble-alt</#if>">
                            <#if post.contentType == "text">
                            <#if (post_index+1) == posts_list?size>
                            <span id="typed"></span>
                            <#else>
                            ${post.content}
                            </#if>
                            <#else>
                            ${post.content}
                            </#if>
                        </div>
                    </div>
                    </#list>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="chatInput">
                <form class="form" action="jsp/site/Portal.jsp" method="post" >
                    <input type="hidden" name="page" value="chatbot">
                    <input type="hidden" name="action" value="response">
                    <input type="hidden" name="bot" value="${bot}" />
                    <input type="hidden" name="language" value="${language}" />
                    <input type="hidden" name="standalone" value="${standalone}" />
                    <div class="input-group">
                        <input id="input" type="text" name="response" class="form-control input-sm" required >
                        <span class="input-group-btn">
                            <!--
                             <button class="btn btn-default btn-sm reset" type="reset" >
                                <i class="fa fa-eraser"></i>
                            </button>
                            -->
                            <button class="btn btn-default btn-sm" type="submit" >
                                #i18n{chatbot.bot.buttonSend} <i class="fa fa-comment"></i>
                            </button>
                        </span>
                    </div>
                </form>
            </div>
        </div>

        <script src="js/plugins/chatbot/typed.js" type="text/javascript"></script>        
        <script>
            $(function () {
                $(window).scrollTop($(document).height());

                $("#typed").typed({
                    strings: ["<#if posts_list?size != 0 >${posts_list[posts_list?size-1].content}</#if>"],
                    // stringsElement: $('#typed-strings'),
                    typeSpeed: 1,
                    backDelay: 500,
                    loop: false,
                    contentType: 'html', // or text
                    // defaults to false for infinite loop
                    loopCount: false,
                    callback: function () {
                        foo();
                    },
                    resetCallback: function () {
                        newTyped();
                    }
                });

                /*
                 $(".reset").click(function(){
                 $(".direct-chat-messages").typed('reset');
                 });
                 */
                $("#input").focus();
            });
        </script>
                
    </body>
</html>
<script src="js/plugins/chatbot/typed.js" type="text/javascript"></script>

<div class="row">
	<div class="col-xs-12">
		<div class="container" id="chatBotOuterContainer">
		<div class="col-sm-offset-2 col-sm-8" id="chatBotInnerContainer">
			<div class="chatContainer">
				<!--Liste des Posts-->
				<div class="direct-chat-messages">
					<#list posts_list as post >
					<div class="chatBox">
					<#if post.author!=1><img src="${bot_avatar}" class="botAvatar" alt="avatar" title=""></#if>
					<div class="bubble <#if post.author==1>bubble-alt</#if>">
                                            <#if post.contentType == "text">
							<#if (post_index+1) == posts_list?size>
							<span id="typed"></span>
							<#else>
								${post.content}
							</#if>
                                            <#else>
                                                ${post.content}
                                            </#if>
					</div>
					</div>
					</#list>
				</div>
			</div>
			
			<div class="clearfix"></div>

                        <div class="chatInput">
                            <form class="form" action="jsp/site/Portal.jsp" method="post" >
                                <input type="hidden" name="page" value="chatbot" />
                                <input type="hidden" name="action" value="response" />
                                <input type="hidden" name="bot" value="${bot}" />
                                <input type="hidden" name="language" value="${language}" />
                                <input type="hidden" name="standalone" value="${standalone}" />
                                <div class="input-group">
                                    <input id="input" type="text" name="response" class="form-control input-sm">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary btn-sm" type="submit" >
                                            <i class="fa fa-comment"></i>
                                            <span class="hidden-xs">#i18n{chatbot.bot.buttonSend}</span>
                                        </button>
                                    </span>
                                </div>
                            </form>
                        </div>
                </div>
		</div>
    <!--    
    <div class="col-md-3 pull-left hidden-xs">
        <img class="img-responsive" src="images/skin/plugins/chatbot/bot-side.jpg" alt="bot picture" />
    </div>
		-->
	</div>
</div>
<script>
 $(function(){

        $("#typed").typed({
            strings: ["<#if posts_list?size != 0 >${posts_list[posts_list?size-1].content}</#if>"],
            // stringsElement: $('#typed-strings'),
            typeSpeed: 1,
            backDelay: 200,
            loop: false,
            contentType: 'html', // or text
            // defaults to false for infinite loop
            loopCount: false,
            callback: function(){ foo(); },
            resetCallback: function() { newTyped(); }
        });

        $(".reset").click(function(){
            $("#typed").typed('reset');
        });
        
        $("#input").focus();

    });
</script>

<script>
    // Scroll to the bottom of the conversation
    document.body.scrollIntoView(false);
</script>
